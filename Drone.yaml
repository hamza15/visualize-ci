kind: pipeline
type: kubernetes
name: default


steps:


- name: build
  image: node:17.0.1
  commands:
    - "npm install"

- name: test
  image: node:17.0.1
  commands:
    - "npm test"

- name: publish  
  image: plugins/docker
  settings:
    username:
      from_secret: docker_username
    password:
      from_secret: docker_password
    repo: sardan5/drone-demo
    tags: ${DRONE_TAG}
    when:
      event: [ tag ]
